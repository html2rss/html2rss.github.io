---
title: 'Complex Configurations'
description: 'Advanced configuration examples for complex scraping scenarios based on actual working configurations.'
---

This guide shows advanced configuration examples for complex scraping scenarios. All examples are based on actual working configurations from the [spec/examples](https://github.com/html2rss/html2rss/tree/main/spec/examples) directory.

## Combine multiple Scrapers

*[Source: [combined_scraper_sources_spec.rb](https://github.com/html2rss/html2rss/blob/main/spec/examples/combined_scraper_sources_spec.rb)]*

```yaml
channel:
  url: "https://example.com"
  title: "ACME Tech Daily"

# Use auto-source for the main content
auto_source: {}

# Add additional selectors for extra data
selectors:
  items:
    selector: ".news-item"
    enhance: true
  title:
    selector: "h2"
  url:
    selector: "a"
    extractor: "href"
  description:
    selector: ".content"
  category:
    selector: ".category"
    post_process:
      - name: "gsub"
        pattern: "News"
        replacement: "Breaking News"
  tags:
    selector: ".tags a"
    extractor: "text"
  custom_guid:
    selector: "h2"
    post_process:
      - name: "template"
        string: "%<self>s-%<url>s"
        methods:
          - self
          - url
  guid:
    - custom_guid
```

## JSON API with Complex Structure

*[Source: [json_api_site_spec.rb](https://github.com/html2rss/html2rss/blob/main/spec/examples/json_api_site_spec.rb)]*

Handle complex JSON responses:

```yaml
headers:
  Accept: "application/json"
  Authorization: "Bearer YOUR_TOKEN"

channel:
  url: "https://example.com/posts"
  title: "ACME JSON API Site News"

selectors:
  items:
    selector: "data > array > object"
    enhance: false
  title:
    selector: "title"
  description:
    selector: "content"
    post_process:
      - name: "html_to_markdown"
  author:
    selector: "author name"
  published_at:
    selector: "created_at"
    post_process:
      - name: "parse_time"
  categories:
    - "category"
    - "tags"
  category:
    selector: "category name"
  tags:
    selector: "tags array object name"
  image:
    selector: "featured_image url"
  enclosure:
    selector: "audio_file url"
    content_type: "audio/mpeg"
```

## Dynamic Content with Browserless

*[Source: [dynamic_content_site_spec.rb](https://github.com/html2rss/html2rss/blob/main/spec/examples/dynamic_content_site_spec.rb)]*

Handle JavaScript-heavy sites:

```yaml
strategy: browserless

channel:
  url: "https://example.com/news"
  title: "ACME Dynamic Content Site News"
  time_zone: "America/New_York"

selectors:
  items:
    selector: ".article-card"
  title:
    selector: "h2"
  url:
    selector: "a"
    extractor: "href"
  description:
    selector: ".excerpt"
    post_process:
      - name: "sanitize_html"
  published_at:
    selector: ".timestamp"
    post_process:
      - name: "parse_time"
```

## Multi-Language Feed

*[Source: [multilang_site_spec.rb](https://github.com/html2rss/html2rss/blob/main/spec/examples/multilang_site_spec.rb)]*

Handle international content:

```yaml
channel:
  url: "https://example.com"
  title: "ACME Multi-Language Site News"
  language: "en"
  time_zone: "UTC"

selectors:
  items:
    selector: ".post"
  title:
    selector: "h1"
    post_process:
      - name: "template"
        string: "[%<language>s] %<self>s"
  language:
    selector: ".lang"
    extractor: "attribute"
    attribute: "data-lang"
  description:
    selector: ".content"
    post_process:
      - name: "sanitize_html"
  categories:
    - "language"
    - "topic"
  topic:
    selector: ".topic"
```

## Feed with Media Enclosures

*[Source: [media_enclosures_spec.rb](https://github.com/html2rss/html2rss/blob/main/spec/examples/media_enclosures_spec.rb)]*

Include audio/video content:

```yaml
channel:
  url: "https://example.com"
  title: "ACME Tech Podcast Feed"

selectors:
  items:
    selector: ".episode"
  title:
    selector: "h3"
  description:
    selector: ".description"
    post_process:
      - name: "html_to_markdown"
  published_at:
    selector: ".date"
    post_process:
      - name: "parse_time"
  url:
    selector: "a"
    extractor: "href"
  enclosure:
    selector: "audio, video"  # Support both audio and video
    extractor: "attribute"
    attribute: "src"
    content_type: "audio/mpeg"  # Default content type
  duration:
    selector: ".duration"
    extractor: "attribute"
    attribute: "data-duration"
  categories:
    - duration  # Include duration as a category
```

## Conditional Processing

*[Source: [conditional_processing_spec.rb](https://github.com/html2rss/html2rss/blob/main/spec/examples/conditional_processing_spec.rb)]*

Use post-processors for conditional logic:

```yaml
channel:
  url: "https://example.com"
  title: "ACME Conditional Processing Site News"

selectors:
  items:
    selector: ".item"
  title:
    selector: "h2"
  status:
    selector: ".status"
  description:
    selector: ".content"
    post_process:
      - name: "template"
        string: "[Status: %<status>s] %<self>s"
  published_at:
    selector: ".date"
    post_process:
      - name: "parse_time"
  categories:
    - status  # Include status as a category
```

## Performance-Optimized Configuration

*[Source: [performance_optimized_spec.rb](https://github.com/html2rss/html2rss/blob/main/spec/examples/performance_optimized_spec.rb)]*

Optimize for speed and reliability:

```yaml
channel:
  url: "https://example.com"
  title: "ACME Performance-Optimized Site News"

# Use specific selectors to reduce processing
selectors:
  items:
    selector: ".main-content .post:not(.advertisement)"
  title:
    selector: "h2"
  url:
    selector: "a"
    extractor: "href"
  published_at:
    selector: "time"
    extractor: "attribute"
    attribute: "datetime"
    post_process:
      - name: "parse_time"

# Use auto-source as fallback (disabled for testing)
# auto_source:
#   scraper:
#     html:
#       minimum_selector_frequency: 3 # Higher threshold for reliability
#       use_top_selectors: 3 # Fewer selectors for speed
```

## Error Handling Configuration

*[Source: [unreliable_site_spec.rb](https://github.com/html2rss/html2rss/blob/main/spec/examples/unreliable_site_spec.rb)]*

Robust configuration with fallbacks:

```yaml
channel:
  url: "https://example.com"
  ttl: 60 # Shorter TTL for unreliable sites

selectors:
  items:
    selector: ".post, .article" # Multiple selectors as fallback
  title:
    selector: "h1, h2, .title" # Fallback selectors
  description:
    selector: ".content, .excerpt, p"
    post_process:
      - name: "sanitize_html"
      - name: "substring"
        start: 0
        end: 499 # Limit description length
  url:
    selector: "a"
    extractor: "href"
    post_process:
      - name: "parse_uri" # Validate URLs
```
