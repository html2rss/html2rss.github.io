<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            text-align: center;
        }
        .redirect-message {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <h1>Page Moved</h1>
    <div class="redirect-message">
        <p>This page has moved to a new location.</p>
        <div class="spinner"></div>
        <p>Redirecting you automatically...</p>
        <p><small>If you are not redirected automatically, <a href="/" id="fallback-link">click here to go to the homepage</a>.</small></p>
    </div>

    <script>
        // Redirect mapping from Jekyll URLs (with trailing slash) to Astro URLs (without trailing slash)
        const redirectMap = {
            '/about/': '/about',
            '/configs/': '/configs',
            '/html2rss-configs/': '/html2rss-configs',
            '/get-involved/contributing/': '/get-involved/contributing',
            '/get-involved/discussions/': '/get-involved/discussions',
            '/get-involved/issues-and-features/': '/get-involved/issues-and-features',
            '/get-involved/sponsoring/': '/get-involved/sponsoring',
            '/ruby-gem/how-to/advanced-content-extraction/': '/ruby-gem/how-to/advanced-content-extraction',
            '/ruby-gem/how-to/custom-http-requests/': '/ruby-gem/how-to/custom-http-requests',
            '/ruby-gem/how-to/dynamic-parameters/': '/ruby-gem/how-to/dynamic-parameters',
            '/ruby-gem/how-to/handling-dynamic-content/': '/ruby-gem/how-to/handling-dynamic-content',
            '/ruby-gem/how-to/managing-feed-configs/': '/ruby-gem/how-to/managing-feed-configs',
            '/ruby-gem/how-to/scraping-json/': '/ruby-gem/how-to/scraping-json',
            '/ruby-gem/how-to/styling-rss-feed/': '/ruby-gem/how-to/styling-rss-feed',
            '/ruby-gem/reference/auto-source/': '/ruby-gem/reference/auto-source',
            '/ruby-gem/reference/channel/': '/ruby-gem/reference/channel',
            '/ruby-gem/reference/cli-reference/': '/ruby-gem/reference/cli-reference',
            '/ruby-gem/reference/headers/': '/ruby-gem/reference/headers',
            '/ruby-gem/reference/strategy/': '/ruby-gem/reference/strategy',
            '/ruby-gem/reference/stylesheets/': '/ruby-gem/reference/stylesheets',
            '/web-application/reference/versioning-and-releases/': '/web-application/reference/versioning-and-releases'
        };

        // Get the current path
        const currentPath = window.location.pathname;

        // Check if we have a specific redirect for this path
        if (redirectMap[currentPath]) {
            // Redirect to the new URL
            window.location.replace(redirectMap[currentPath]);
        } else if (currentPath.endsWith('/') && currentPath !== '/') {
            // Generic redirect: remove trailing slash
            const newPath = currentPath.slice(0, -1);
            window.location.replace(newPath);
        } else {
            // No redirect found, go to homepage
            document.getElementById('fallback-link').href = '/';
            document.querySelector('.redirect-message p').textContent = 'This page could not be found.';
            document.querySelector('.redirect-message p:nth-child(2)').textContent = 'Redirecting you to the homepage...';
            setTimeout(() => {
                window.location.replace('/');
            }, 2000);
        }
    </script>
</body>
</html>
